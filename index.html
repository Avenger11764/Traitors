<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traitors: Interactive Game Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- 
      Application Structure:
      This is a single-page application (SPA) using a tab-based navigation system. This structure is ideal for breaking down complex game rules into logical, manageable sections (Overview, Game Flow, Actions, etc.). It allows new players to learn step-by-step, while letting experienced players quickly find specific information, like commands, without scrolling through a long document. The design guides the user from a high-level summary to all details, which is optimal for learning and usability.

      Visualization & Content Choices:
      - Game Flow Diagram: A responsive, horizontal flowchart built with styled HTML/CSS. A visual diagram is more intuitive than text for understanding a cyclical process. JavaScript is used to handle clicks to show details for each stage.
      - Key Actions Display: A grid of "cards," each with an icon. Cards provide clear visual separation for distinct concepts, making the different Traitor actions easy to differentiate.
      - Command List: A list where each item has a copy-to-clipboard button. This is a significant user experience improvement for a game played in a chat client where commands must be typed accurately.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-active {
            border-color: #f59e0b; /* amber-500 */
            color: #f59e0b; /* amber-500 */
            background-color: #334155; /* slate-700 */
        }
        .flow-arrow::after {
            content: '‚Üí';
            font-size: 1.5rem;
            line-height: 2rem;
            color: #64748b; /* slate-500 */
            margin: 0 0.5rem;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-300">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-2">The Traitors</h1>
            <p class="text-lg text-amber-400">A Game of Deception & Greed</p>
        </header>

        <!-- Tabs Navigation -->
        <nav class="mb-8 border-b border-slate-700">
            <ul id="tabs" class="flex flex-wrap -mb-px text-sm font-medium text-center" role="tablist">
                <li role="presentation"><button class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-amber-400 hover:border-amber-400" data-tab-target="#overview" role="tab">Overview</button></li>
                <li role="presentation"><button class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-amber-400 hover:border-amber-400" data-tab-target="#flow" role="tab">Game Flow</button></li>
                <li role="presentation"><button class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-amber-400 hover:border-amber-400" data-tab-target="#actions" role="tab">Key Actions</button></li>
                <li role="presentation"><button class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-amber-400 hover:border-amber-400" data-tab-target="#winning" role="tab">Points & Winning</button></li>
                <li role="presentation"><button class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-amber-400 hover:border-amber-400" data-tab-target="#commands" role="tab">Commands</button></li>
            </ul>
        </nav>

        <!-- Tab Content -->
        <div id="tab-content">
            <!-- Overview Tab -->
            <div id="overview" role="tabpanel" class="tab-pane space-y-8">
                <div>
                    <h2 class="text-2xl font-bold text-white mb-4">Welcome to the Game</h2>
                    <p class="text-lg leading-relaxed">Among a group of **Faithful**, a small team of **Traitors** have been secretly chosen. Their mission is to build their fortune by murdering the Faithful and seizing their points. The Faithful must work together to identify and banish the Traitors through daily votes. Every decision has consequences. Can the Faithful unmask the villains before their team's points run out? Or will the Traitors deceive their way to victory? Trust no one. Question everything. Your survival depends on it.</p>
                </div>

                <div class="p-4 border-l-4 border-red-500 bg-slate-800 rounded">
                    <h3 class="text-xl font-bold text-red-400 mb-2">Critical Rule: No Forwarding!</h3>
                    <p class="leading-relaxed">The bot's direct messages (DMs) contain secret information about your role. **Forwarding these messages is strictly forbidden.** Revealing your role by sharing screenshots or forwarding the bot's messages directly to any other player will result in immediate removal from the game by the admin. The spirit of the game is deception, not cheating.</p>
                </div>

                <div>
                    <h2 class="text-2xl font-bold text-white mb-4">How to Play</h2>
                    <ol class="list-decimal list-inside space-y-4">
                        <li class="flex items-start">
                            <span class="text-amber-400 font-bold text-2xl mr-4">1.</span>
                            <div>
                                <h3 class="font-semibold text-lg text-white">Start a Game</h3>
                                <p>An admin starts a new game lobby by typing <code class="bg-slate-700 text-amber-400 px-2 py-1 rounded">/startgame</code> in the chat.</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                             <span class="text-amber-400 font-bold text-2xl mr-4">2.</span>
                            <div>
                                <h3 class="font-semibold text-lg text-white">Join the Lobby</h3>
                                <p>All players who wish to participate must type <code class="bg-slate-700 text-amber-400 px-2 py-1 rounded">/join</code>.</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="text-amber-400 font-bold text-2xl mr-4">3.</span>
                            <div>
                                <h3 class="font-semibold text-lg text-white">Begin the Game</h3>
                                <p>The admin types <code class="bg-slate-700 text-amber-400 px-2 py-1 rounded">/begin</code> to lock the lobby, assign roles and points, and start the first night.</p>
                            </div>
                        </li>
                    </ol>
                </div>
            </div>

            <!-- Game Flow Tab -->
            <div id="flow" role="tabpanel" class="tab-pane hidden space-y-8">
                 <div>
                    <h2 class="text-2xl font-bold text-white mb-4">The Game Cycle</h2>
                    <p class="mb-6">The game alternates between phases with automated timers. Admins can use commands to override these timers. Click a stage for details.</p>
                    <div id="flow-diagram" class="flex flex-col md:flex-row items-center justify-center text-center">
                        <div class="flow-stage cursor-pointer p-4 bg-slate-800 rounded-lg border-2 border-transparent hover:border-amber-500" data-flow="night">
                            <div class="text-4xl mb-2">üåô</div>
                            <div class="font-bold text-white">Night Phase</div>
                        </div>
                        <div class="flow-arrow hidden md:block"></div>
                        <div class="w-1 h-8 md:h-1 md:w-8 bg-slate-700 my-2 md:my-0"></div>
                        <div class="flow-stage cursor-pointer p-4 bg-slate-800 rounded-lg border-2 border-transparent hover:border-amber-500" data-flow="day">
                             <div class="text-4xl mb-2">‚òÄÔ∏è</div>
                            <div class="font-bold text-white">Day Discussion</div>
                        </div>
                         <div class="flow-arrow hidden md:block"></div>
                         <div class="w-1 h-8 md:h-1 md:w-8 bg-slate-700 my-2 md:my-0"></div>
                        <div class="flow-stage cursor-pointer p-4 bg-slate-800 rounded-lg border-2 border-transparent hover:border-amber-500" data-flow="vote">
                             <div class="text-4xl mb-2">üó≥Ô∏è</div>
                            <div class="font-bold text-white">Banishment Vote</div>
                        </div>
                        <div class="flow-arrow hidden md:block"></div>
                         <div class="w-1 h-8 md:h-1 md:w-8 bg-slate-700 my-2 md:my-0"></div>
                        <div class="flow-stage cursor-pointer p-4 bg-slate-800 rounded-lg border-2 border-transparent hover:border-amber-500" data-flow="cooldown">
                             <div class="text-4xl mb-2">Transition</div>
                        </div>
                    </div>
                    <div id="flow-details" class="mt-6 p-6 bg-slate-800 rounded-lg min-h-[140px]">
                        <p>Click a stage above to learn more.</p>
                    </div>
                </div>
            </div>

            <!-- Key Actions Tab -->
            <div id="actions" role="tabpanel" class="tab-pane hidden space-y-8">
                 <h2 class="text-2xl font-bold text-white">Traitors' Arsenal & Divine Intervention</h2>
                 <p>During the Night Phase, Traitors perform a secret action. However, a Faithful might be secretly protected.</p>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">
                    <div class="bg-slate-800 p-6 rounded-lg col-span-1 md:col-span-2 lg:col-span-2">
                        <div class="text-4xl mb-3">üõ°Ô∏è</div>
                        <h3 class="text-xl font-bold text-white mb-2">Divine Shield (Faithful)</h3>
                        <p>At the start of each night, there is a 50% chance a random, active Faithful will be granted a Divine Shield. This player is notified privately. A shield protects them from being murdered and from losing points to blackmail for that one night.</p>
                    </div>
                    <div class="bg-slate-800 p-6 rounded-lg">
                        <div class="text-4xl mb-3">üî™</div>
                        <h3 class="text-xl font-bold text-white mb-2">Murder (Traitor)</h3>
                        <p>The Traitors' primary action. They choose one Faithful to eliminate. If the target is not shielded, they are removed from the game, and their points are transferred to the Traitor team's pool.</p>
                    </div>
                     <div class="bg-slate-800 p-6 rounded-lg">
                        <div class="text-4xl mb-3">üë§</div>
                        <h3 class="text-xl font-bold text-white mb-2">Recruit (Traitor)</h3>
                        <p>Available when 2 or more Traitors are active. They can forgo a murder and instead secretly offer a Faithful the chance to become a Traitor.</p>
                    </div>
                     <div class="bg-slate-800 p-6 rounded-lg">
                        <div class="text-4xl mb-3">ü§´</div>
                        <h3 class="text-xl font-bold text-white mb-2">Blackmail (Traitor)</h3>
                        <p>Available only when 1 Traitor remains. The final Traitor can give a Faithful an ultimatum: join the Traitors, or stay Faithful and lose 100 points (unless shielded).</p>
                    </div>
                 </div>
            </div>

            <!-- Winning Tab -->
            <div id="winning" role="tabpanel" class="tab-pane hidden space-y-8">
                <h2 class="text-2xl font-bold text-white">How to Win</h2>
                <div class="space-y-4">
                    <p><strong class="text-amber-400">By Elimination:</strong> A team wins if all members of the opposing team have been eliminated (banished or murdered).</p>
                    <p><strong class="text-amber-400">By Points:</strong> A team wins if the opposing team's total score drops to 0 or below.</p>
                    <p><strong class="text-amber-400">The Final Two:</strong> If the game comes down to two players:
                        <ul class="list-disc list-inside ml-4 mt-2">
                           <li>If one is a Traitor and one is a Faithful, the **Traitors win** immediately.</li>
                           <li>If both are from the same team, the team with the **highest point total wins**.</li>
                        </ul>
                    </p>
                     <p><strong class="text-amber-400">By Admin Decision:</strong> If an admin uses <code class="bg-slate-700 text-amber-400 px-1 py-0.5 rounded">/endgame</code>, the team with the higher point total wins.</p>
                </div>
                 <h2 class="text-2xl font-bold text-white mt-8">The Point System</h2>
                 <p>Both teams start with a shared pool of 1000 points, divided equally among team members. The flow of these points is critical to victory.</p>
                 <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-8">
                     <div class="bg-slate-800 p-6 rounded-lg">
                         <h3 class="text-lg font-semibold text-green-400 mb-2">Points are Gained When...</h3>
                         <ul class="list-disc list-inside space-y-2">
                            <li><strong>Faithfuls:</strong> Your team votes to banish a Traitor. The banished Traitor's points are seized and distributed among all active Faithfuls.</li>
                            <li><strong>Traitors:</strong> Your team murders a Faithful. The victim's points are transferred to the active Traitors.</li>
                            <li><strong>Traitors:</strong> Your team votes to banish a Faithful. The victim's points are transferred to the active Traitors.</li>
                             <li><strong>Traitors:</strong> A Faithful declines a Blackmail offer, transferring 100 points to the last Traitor.</li>
                         </ul>
                     </div>
                      <div class="bg-slate-800 p-6 rounded-lg">
                         <h3 class="text-lg font-semibold text-red-400 mb-2">Points are Lost When...</h3>
                         <ul class="list-disc list-inside space-y-2">
                             <li>A member of your team is banished or murdered. Their points are transferred to the opposing team.</li>
                             <li>A Traitor successfully blackmails one of your Faithful teammates, costing them 100 points (unless they are shielded).</li>
                         </ul>
                     </div>
                 </div>
            </div>

            <!-- Commands Tab -->
            <div id="commands" role="tabpanel" class="tab-pane hidden space-y-6">
                <h2 class="text-2xl font-bold text-white">Game Commands Reference</h2>
                <p>A quick reference for all game commands. Admin commands can be used by the player who started the game or any chat administrator.</p>
                <div class="space-y-4">
                    <div class="p-4 bg-slate-800 rounded-lg flex items-center justify-between">
                        <div>
                            <code class="command-text text-amber-400 font-mono">/startgame</code> <span class="text-xs font-semibold text-slate-400">(Admin)</span>
                            <p class="text-sm text-slate-400">Creates a new game lobby for players to join.</p>
                        </div>
                        <button class="copy-btn bg-slate-700 hover:bg-slate-600 text-white font-bold py-1 px-3 rounded text-sm">Copy</button>
                    </div>
                    <div class="p-4 bg-slate-800 rounded-lg flex items-center justify-between">
                        <div>
                            <code class="command-text text-amber-400 font-mono">/join</code> <span class="text-xs font-semibold text-slate-400">(Player)</span>
                            <p class="text-sm text-slate-400">Allows a player to join an open game lobby.</p>
                        </div>
                        <button class="copy-btn bg-slate-700 hover:bg-slate-600 text-white font-bold py-1 px-3 rounded text-sm">Copy</button>
                    </div>
                    <div class="p-4 bg-slate-800 rounded-lg flex items-center justify-between">
                        <div>
                            <code class="command-text text-amber-400 font-mono">/leave</code> <span class="text-xs font-semibold text-slate-400">(Player)</span>
                            <p class="text-sm text-slate-400">Allows a player to leave the lobby or an active game.</p>
                        </div>
                        <button class="copy-btn bg-slate-700 hover:bg-slate-600 text-white font-bold py-1 px-3 rounded text-sm">Copy</button>
                    </div>
                     <div class="p-4 bg-slate-800 rounded-lg flex items-center justify-between">
                        <div>
                            <code class="command-text text-amber-400 font-mono">/begin</code> <span class="text-xs font-semibold text-slate-400">(Admin)</span>
                            <p class="text-sm text-slate-400">Starts the game, assigns roles, and begins Night 1.</p>
                        </div>
                        <button class="copy-btn bg-slate-700 hover:bg-slate-600 text-white font-bold py-1 px-3 rounded text-sm">Copy</button>
                    </div>
                    <div class="p-4 bg-slate-800 rounded-lg flex items-center justify-between">
                        <div>
                             <code class="command-text text-amber-400 font-mono">/startday</code> <span class="text-xs font-semibold text-slate-400">(Admin)</span>
                            <p class="text-sm text-slate-400">Manually starts the Day Discussion phase, overriding the timer.</p>
                        </div>
                        <button class="copy-btn bg-slate-700 hover:bg-slate-600 text-white font-bold py-1 px-3 rounded text-sm">Copy</button>
                    </div>
                     <div class="p-4 bg-slate-800 rounded-lg flex items-center justify-between">
                        <div>
                            <code class="command-text text-amber-400 font-mono">/startvote</code> <span class="text-xs font-semibold text-slate-400">(Admin)</span>
                            <p class="text-sm text-slate-400">Manually starts the Banishment Vote, overriding the discussion timer.</p>
                        </div>
                        <button class="copy-btn bg-slate-700 hover:bg-slate-600 text-white font-bold py-1 px-3 rounded text-sm">Copy</button>
                    </div>
                     <div class="p-4 bg-slate-800 rounded-lg flex items-center justify-between">
                        <div>
                            <code class="command-text text-amber-400 font-mono">/endvote</code> <span class="text-xs font-semibold text-slate-400">(Admin)</span>
                            <p class="text-sm text-slate-400">Forces the voting round to end and tallies the current votes, even if not all players have voted.</p>
                        </div>
                        <button class="copy-btn bg-slate-700 hover:bg-slate-600 text-white font-bold py-1 px-3 rounded text-sm">Copy</button>
                    </div>
                    <div class="p-4 bg-slate-800 rounded-lg flex items-center justify-between">
                        <div>
                            <code class="command-text text-amber-400 font-mono">/startnight</code> <span class="text-xs font-semibold text-slate-400">(Admin)</span>
                            <p class="text-sm text-slate-400">Manually starts the Night Phase, overriding the transition timer.</p>
                        </div>
                        <button class="copy-btn bg-slate-700 hover:bg-slate-600 text-white font-bold py-1 px-3 rounded text-sm">Copy</button>
                    </div>
                     <div class="p-4 bg-slate-800 rounded-lg flex items-center justify-between">
                        <div>
                            <code class="command-text text-amber-400 font-mono">/remove @Player</code> <span class="text-xs font-semibold text-slate-400">(Admin)</span>
                            <p class="text-sm text-slate-400">Forcibly removes a player by mentioning them. Their role is revealed and points are transferred.</p>
                        </div>
                        <button class="copy-btn bg-slate-700 hover:bg-slate-600 text-white font-bold py-1 px-3 rounded text-sm">Copy</button>
                    </div>
                     <div class="p-4 bg-slate-800 rounded-lg flex items-center justify-between">
                        <div>
                            <code class="command-text text-amber-400 font-mono">/endgame</code> <span class="text-xs font-semibold text-slate-400">(Admin)</span>
                            <p class="text-sm text-slate-400">Immediately ends the game and declares a winner based on the current team point totals.</p>
                        </div>
                        <button class="copy-btn bg-slate-700 hover:bg-slate-600 text-white font-bold py-1 px-3 rounded text-sm">Copy</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- Element Selectors ---
    const tabs = document.querySelectorAll('[data-tab-target]');
    const tabContents = document.querySelectorAll('.tab-pane');
    const flowStages = document.querySelectorAll('.flow-stage');
    const flowDetails = document.getElementById('flow-details');
    const copyButtons = document.querySelectorAll('.copy-btn');

    // --- Data for Interactive Elements ---
    const flowDescriptions = {
        night: `
            <h3 class="font-bold text-white mb-2">The Night Phase üåô</h3>
            <p>A random Traitor is prompted to act. There's also a 50% chance a random Faithful gets a Divine Shield, protecting them from murder and blackmail. After the Traitors act, the Day Discussion phase is scheduled to begin in 6 hours.</p>`,
        day: `
            <h3 class="font-bold text-white mb-2">Day Discussion ‚òÄÔ∏è</h3>
            <p>The day begins, revealing any murders. Players now have a 3-hour discussion period to debate who the Traitors are. The admin can skip this timer with /startvote.</p>`,
        vote: `
            <h3 class="font-bold text-white mb-2">Banishment Vote üó≥Ô∏è</h3>
            <p>Each active player receives a private message from the bot to cast their vote. First, you select a target with a button. Then, you must reply with a text message in the DM explaining your reason. Once all votes are in (or an admin uses /endvote), the results are revealed publicly.</p>`,
        cooldown: `
            <h3 class="font-bold text-white mb-2">Transition ‚è≥</h3>
            <p>After the vote results are announced, there is a 3-hour cooldown before the next Night Phase begins automatically. The admin can skip this timer with /startnight.</p>`
    };

    // --- Initialization ---
    // Set the first tab as active by default
    if (tabs.length > 0) {
        tabs[0].classList.add('tab-active');
        const initialTarget = document.querySelector(tabs[0].dataset.tabTarget);
        if (initialTarget) initialTarget.classList.remove('hidden');
    }

    // --- Event Listeners ---
    // Handle tab navigation
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTarget);
            
            // Update tab visual state
            tabs.forEach(t => t.classList.remove('tab-active'));
            tab.classList.add('tab-active');

            // Show the correct content panel
            tabContents.forEach(tc => tc.classList.add('hidden'));
            if (target) {
                target.classList.remove('hidden');
            }
        });
    });

    // Handle clicks on the game flow diagram
    flowStages.forEach(stage => {
        stage.addEventListener('click', () => {
            const flowKey = stage.dataset.flow;
            
            // Update visual state of the clicked stage
            flowStages.forEach(s => s.classList.remove('border-amber-500', 'bg-slate-700'));
            stage.classList.add('border-amber-500', 'bg-slate-700');
            
            // Display the corresponding description
            if (flowDescriptions[flowKey]) {
                flowDetails.innerHTML = flowDescriptions[flowKey];
            }
        });
    });

    // Handle clicks on all "Copy" buttons
    copyButtons.forEach(button => {
        button.addEventListener('click', () => {
            const commandTextElement = button.closest('.flex').querySelector('.command-text');
            if (!commandTextElement) return;
            const commandText = commandTextElement.innerText;
            
            // Use the modern Clipboard API
            navigator.clipboard.writeText(commandText).then(() => {
                // Provide visual feedback to the user
                const originalText = button.innerText;
                button.innerText = 'Copied!';
                button.disabled = true;
                setTimeout(() => {
                    button.innerText = originalText;
                    button.disabled = false;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy command: ', err);
                // Fallback for older browsers or insecure contexts
                const textArea = document.createElement('textarea');
                textArea.value = commandText;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    // Provide visual feedback for the fallback method
                    const originalText = button.innerText;
                    button.innerText = 'Copied!';
                    button.disabled = true;
                    setTimeout(() => {
                        button.innerText = originalText;
                        button.disabled = false;
                    }, 2000);
                } catch (e) {
                    console.error('Fallback copy method failed', e);
                }
                document.body.removeChild(textArea);
            });
        });
    });
});
</script>

</body>
</html>
